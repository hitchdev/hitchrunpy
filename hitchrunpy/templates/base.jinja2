# -*- coding: utf-8 -*-
import sys

if sys.version_info[0] == 3:
    unicode = str

def not_equal(lhs, rhs):
    import json

    with open("{{ error_path }}", "w") as handle:
        handle.write(json.dumps({
            "event": "notequal",
            "lhs": repr(lhs),
            "rhs": repr(rhs),
        }))

{% if long_strings %}
{% for name, value in long_strings.items() %}
{{ name }} = u"""{{ value }}"""
{% endfor %}
{% endif %}

{% if code or setup_code %}
try:
    {{ setup_code|indent(4) }}

    {{ code|indent(4) }}
except Exception as error:
    import json

    with open("{{ error_path }}", "w") as handle:
        handle.write(json.dumps({
            "event": "exception",
            "exception_type": "{}.{}".format(
                type(error).__module__, type(error).__name__
            ),
            "text": unicode(error),
        }))
    
    sys.exit(0)
{% endif %}

{% block main %}

{% endblock %}
